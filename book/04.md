# 路由器设计基础

## 前言

选择题 12-14，应用题路由聚合（15分）

路由相关术语

1. 分组转发

    分组的传送采用存储-转发凡是，即玩咯节点根据分组控制信息，分组送到下一节点，下一节点接收到分组后，暂时保存下来并排队等候传输，然后根据分组控制信息把该分组传送到下一节点，直至到达最终目的。

2. 路由算法分类

    **静态路由选择算法** 也称为非自适应路由选择，其路由信息是由 **网络管理人员手工配置** 的，且需要网络管理人员手动修改路由表中的路由表项，以适应玩咯拓扑结构变化或网络链路状态的变化。**动态路由选择算法** 也叫做自适应路由选择，其路由信息是通过相互连接的路由器彼此之间 **交换路由信息**，然后按照一定的算法 **计算并优化** 而得出的，同时为适应不断变化的网络，还需要在一定时间间隙对这些路由信息不断更新，以即使获得最有的路径选择效果。

3. 路由的度量标准

    - 跳数：分组从源节点到目的即节点所经过路由器的个数
    - 带宽：链路的传输速率，用来表示通信线路所能传送数据的能力
    - 延时：分组从源节点到达目的节点所花费的时间
    - 负载：单位时间内通过路由器或线路的通信量
    - 可靠性：传输过程中的误码率，域网络的质量和性能有密切的关系
    - 代价：传输过程中的耗费，通常域所使用的链路带宽相关，一般来说，网络的速率越高，其代价也越高。

## 内容

### 一、IP 路由选择和路由汇聚

- 无类域间路由协议（CIDR）**支持通过子网划分的相反过程** 来汇聚路由表项。
- 无类域间路由协议使用 **网络前缀法表示路由表的表现**，具体路由表的项目表示由 **“网络前缀”和“下一跳地址”** 两项内容组成。
- 路由选择变为从匹配结果中选择具有最长网络前缀的路由的过程，这就是 **最长前缀匹配**

### 二、路由信息协议（RIP）

1. RIP 的基本概念

    RIP（路由信息协议）是一种 **分布式、基于距离向量** 的内部网关协议，适用于小型同类网络的一个自治系统内的路由细心的传递。是使用 **跳数** 来衡量到达目的地址的路由距离。

2. RIP 的原理
  
    - 路由刷新报文主要内容由若干个**（V, D）**组成的表。（V, D）表中的 **V 表示“矢量**，标识该路由器可以到达的目的网络或者目的主机；**距离 D 对应路由上的“跳数”**。
    - RIP 规定，路由器 **每 30 秒向外广播一个（V, D）报文（周期性）**，报文信息来自本地路由器表。
    - RIP 规定，一条有限的 **路径长度不得超过 15**，超过 15 则以为路径无限长，即路径不存在。

3. RIP 的运行过程

![RIP 的运行过程](/../static/images/04-01.png)

### 三、最短路径优先协议（OSPF）

1. SOPF 协议概述

    - 开放最短路径优先（OSPF）协议，也是 **内部网关协议** 的一种，克服 RIP 的缺点开发出来的。
    - 开放式最短路径优先协议 **组要用于在自治系统内部路由器之间传输路由信息**。
    - 开放式最短路径优先协议不采用距离矢量的路由算法，而是 **基于 Dijkstra 提出的最短路径算法规则计算路径**。
    - 开放式最短路径优先协议还 **支持分层网络**，这使得它的应用更加具有广泛性和灵活性。

2. SOPE 协议的特征

   - OSPE 主要的特征是使用 **分布式链路状态协议**，而 RIP 使用的是距离向量协议；
   - OSPE 协议要求路由器发送的信息是本路由器与那些相邻路由器，以及链路状态的质量。**链路状态“度量”组要是指费用、距离、延时、带宽等**。
   - OSPF 协议要求当链路状态发生变化时用 **“洪泛法”** 向所有路由器发送此信息，而 RIP 仅向自己相邻的几个路由器发送交换路由信息。
   - OSPF 协议的路由器之间频繁的交换路由状态信息，**区域内部路由器只知道本区域的完整网络拓扑，而不知道其他区域的网络拓扑情况**
   - 为了适应规模很大的网络，并使更新过程收敛的更快，OSPE 协议将一个自治系统再划分为若干个更小的范围，叫做 **区域**。
   - 每个区域有个 **32 位区域标识符**（用点分十进制表示），再一个区域内的路由器数 **不超过 200 个**。

### 四、外部网关协议（BGP）

## 总结